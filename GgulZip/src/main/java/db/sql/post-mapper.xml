<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
	
	<entry key="listCount">
		SELECT COUNT(*) COUNT
		FROM POST
		WHERE STATUS = 'Y'
	</entry>
	
	<entry key="selectList">
		SELECT *
		FROM (
		    SELECT
		        P.POST_NO,
		        C.CATEGORY_NAME,
		        P.TITLE,
		        P.CONTENT,
		        P.COUNT,
		        P.LIKE_COUNT,
		        m.MEMBER_NICKNAME,
		        P.POST_DATE
		    FROM POST P
		    JOIN MEMBER m ON p.MEMBER_NO = m.MEMBER_NO
		    JOIN CATEGORY C ON P.CATEGORY_NO = C.CATEGORY_NO
		    WHERE P.STATUS = 'Y'
		    ORDER BY P.POST_NO) A
			WHERE POST_NO BETWEEN ? AND ?
			
			
	</entry>
	
	<entry key = "increaseCount">
		UPDATE POST
		SET COUNT = COUNT + 1
		WHERE POST_NO = ?
		AND STATUS = 'Y'
	</entry>
	
	<entry key = "selectPost">
		SELECT P.POST_NO,
		       C.CATEGORY_NAME,
		       P.TITLE,
		       P.CONTENT,
		       M.MEMBER_NICKNAME,
		       P.POST_DATE,
		       P.COUNT,
		       P.LIKE_COUNT,
		       P.INTEREST_COUNT,
		       A.REF_BNO,
		       A.ORIGIN_NAME,
		       A.CHANGE_NAME,
		       A.FILE_PATH
		FROM POST P
		JOIN MEMBER M ON P.MEMBER_NO = M.MEMBER_NO
		JOIN CATEGORY C ON P.CATEGORY_NO = C.CATEGORY_NO
		LEFT JOIN ATTACHMENT A ON P.POST_NO = A.REF_BNO
		WHERE P.POST_NO = ?
		AND P.STATUS = 'Y'
	</entry>
	
	<!-- 댓글 -->
	<entry key = "insertComment">
	INSERT INTO COMMENT_TABLE(COMMENT_NO,
							 POST_NO,
						 	 COMMENT_WRITER_NO,
						 	 COMMENT_CONTENT)
					VALUES (SEQ_CNO.NEXTVAL,
								 ?,
								 ?,
						 		 ?)	
	</entry>
	
	<entry key = "selectCommentList">
	SELECT COMMENT_NO
	        , COMMENT_CONTENT
	        , MEMBER_NICKNAME
	        , COMMENT_DATE
	FROM COMMENT_TABLE C
	JOIN MEMBER M ON(MEMBER_NO = POST_NO)
	WHERE POST_NO = ?
	AND C.STATUS = 'Y'
	</entry>
	
	
	<!-- 게시글 작성 -->
	<entry key="insertPost">
		INSERT INTO POST (POST_NO
						, MEMBER_NO
						, CATEGORY_NO
						, TITLE
						, CONTENT)
		VALUES (SEQ_PNO.NEXTVAL
						, ?
						, ?
						, ?
						, ?)
						
	</entry>
	
	<entry key="selectTitlePost">
		SELECT *
		FROM POST P
		JOIN MEMBER M ON P.MEMBER_NO = M.MEMBER_NO
		WHERE TITLE LIKE ?
		AND M.STATUS = 'Y'
	</entry>
	
	<entry key="selectContentPost">
		SELECT *
		FROM POST P
		JOIN MEMBER M ON P.MEMBER_NO = M.MEMBER_NO
		WHERE CONTENT LIKE ?
		AND M.STATUS = 'Y'
	</entry>
	
	<entry key="selectContentPost">
		SELECT *
		FROM POST P
		JOIN MEMBER M ON P.MEMBER_NO = M.MEMBER_NO
		WHERE M.MEMBER_NICKNAME LIKE ?
		AND M.STATUS = 'Y'
	</entry>
	
	<entry key="selectContentPost">
		SELECT *
		FROM POST P 
		JOIN MEMBER M ON P.MEMBER_NO = M.MEMBER_NO
		WHERE CONTENT LIKE ?
		AND TITLE LIKE ? OR CONTENT LIKE ?
		AND M.STATUS = 'Y'
	</entry>
	
</properties>